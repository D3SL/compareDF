---
output: 
  html_document: 
    keep_md: yes
---

# compareDF

[![Travis-CI Build Status](https://travis-ci.org/alexsanjoseph/compareDF.svg?branch=master)](https://travis-ci.org/alexsanjoseph/compareDF)
[![codecov.io](http://codecov.io/github/alexsanjoseph/compareDF/coverage.svg?branch=master)](http://codecov.io/github/alexsanjoseph/compareDF?branch=master)

# Introduction

This package shows what has changed between two data frames that have the same columnar
structure. Such comparison is useful in many cases, for example when you expect only minor 
changes in the data across two data sets such as:

* Variation of a dataset across different time periods for the same grouping
* Variation of values for different algorithms, etc.

# Usage

The package has a single function, `compare_df`. It takes in two data frames, and one or 
more grouping variables and does a comparison between the the two. In addition you can 
sepcificy columns to ignore, decide how many rows of changes to be displayed in the case 
of the HTML output, and decide what tolerance you want to provide to detect change.

# Basic Example

Let's take the case of a teacher who wants to compare the marks and grades of students across
two years, 2010 and 2011. The data is stored in tabular format.

```{r}
data("results_2010", "results_2011")
print(results_2010)
print(results_2011)
```

The data shows the performance of students in two divisions, A and B for two years. Some subjects
like Maths, Physics, Chemistry and Art are given scores while others like Discipline and PE are 
given grades. 

It is possible that there are students of the same name in two divisions, for example, there is 
a Rohit in both the divisions in 2011.

It is also possible that some students have dropped out, or added new across the two years. 
Eg: - Mugger and Dhakkan dropped out while Vikram and Dikchik where added in the Division B

## Basic Comparison
Now let's compare the performance of the students across the years. The grouping variables is the
_Student_ columns. We will ignore the _Division_ columns and assume that the 

```{r}
library(compareDF)
ctable_student = compare_df(results_2011, results_2010, c("Student"))
ctable_student$comparison_df

```

By default, no columns are excluded from the comparison, so any of the tuple of grouping 
variables which are different across the two data frames are shown in the comparison table.

For example, Akshay, Division A has the exact same scores but has two different grades for Discipline across 
the two years so that row is included.

However, Macho, Division B has had the exact same scores in both the years, so his data is not
shown in the comparison table.

## HTML Output
While the comparison, table can be quickly summarized in various forms futher, it is 
very difficult to  process visually, so let's find a way to represent this is a way that is easier 
for the numan eye to read. NOTE: You need to install the `htmlTable` package for the HTML comparison to work.

```{r, results = 'asis'}
print(ctable_student$html_output)
```

The same data is represented in tabular form (for further analysis, if necessary) in the
`comparison_table_diff` object

```{r}
ctable_student$comparison_table_diff
```

## Change Count and Summary
You can get an idea of what has changed using the `change_count` object in the output. A summary 
of the same is provided in the `change_summary` object.

```{r}
ctable_student$change_count
```

```{r}
ctable_student$change_summary
```

## Grouping Multiple Columns

```{r, results = 'asis'}
ctable_student_div = compare_df(results_2011, results_2010, c("Division", "Student"))
print(ctable_student_div$html_output)
```
## Excluding certain Colums

## Limiting

## Tolerance


#===============================================================================
message("Exclude")

#===============================================================================
message("limit")

#limit warning



```
